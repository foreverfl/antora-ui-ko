= Antora 기본 UI 문서 

이 프로젝트는 Antora로 생성된 문서 사이트를 위한 기본 UI 번들을 제작합니다. UI 자산(페이지 템플릿, CSS, JavaScript, 이미지 등)과 Gulp 빌드 스크립트를 포함합니다. 이 빌드는 UI를 로컬에서 미리보기하거나(실시간 업데이트 포함) Antora 사이트 생성기에서 사용할 수 있도록 패키징하는 데 사용할 수 있습니다.

이 문서는 Antora로 생성된 문서 사이트를 위한 UI를 설정, 사용자 정의 및 관리하는 방법을 설명합니다. 이 문서를 읽고 나면 다음을 할 수 있게 됩니다:

* [x] Antora UI 프로젝트의 구조 이해.
* [x] UI 프로젝트 작업을 위한 환경 설정.
* [x] UI를 시각적으로 검사하기 위한 미리보기 서버 실행.
* [x] UI 변경 사항을 공유하고 수용하기 위한 개발 워크플로우 채택.
* [x] Antora에서 사용할 수 있는 문서 사이트용 UI 패키징.

== 파일 유형 및 기술 개요

Antora UI는 Antora에 의해 생성된 문서 사이트 페이지를 구조화하고 스타일링하는 데 사용되는 다음과 같은 파일 유형으로 구성됩니다:

- Handlebars "페이지" 템플릿 (레이아웃, 부분 및 헬퍼)
- CSS (PostCSS를 사용하여 향상됨)
- JavaScript (UI 스크립트)
- 이미지 / 그래픽 (UI 특정)
- 폰트
- UI 미리보기를 위한 샘플 콘텐츠 (HTML 및 UI 모델)

UI 작동 방식을 이해하기 위해 UI에서 사용되는 주요 기술을 살펴보겠습니다.

Handlebars (파일 확장자: .hbs)::
Handlebars는 템플릿 파일에서 HTML을 생성하는 데 사용되는 "로직 없는" 템플릿 엔진입니다. 템플릿에는 모델에서 콘텐츠가 주입되는 플레이스홀더(예: {{{page.title}}})가 포함되어 있습니다. 또한 콘텐츠를 반복하거나 조건부로 포함하기 위한 간단한 로직 표현식(예: {{#each navigation}})과 부분(예: {{> header}})을 수용합니다.

Gulp (스크립트 파일: gulpfile.js/index.js)::
Gulp는 JavaScript 프로젝트를 위한 빌드 도구입니다. 파일 컴파일, 미리보기 서버 실행 또는 릴리스 발행과 같은 자동화된 작업을 수행하는 데 사용할 수 있는 작업 모음을 구성합니다.

npm (명령어: npm)::
npm은 npmjs.com에서 다운로드하는 소프트웨어 패키지(즉, 소프트웨어 종속성)를 관리합니다. 이 프로젝트에서 사용하는 소프트웨어에는 컴파일을 처리하는 라이브러리와 npm 패키지로 배포되는 공유 자산(예: 폰트 파일)이 포함됩니다. npm은 Node.js의 일부입니다.

npx (명령어: npx)::
npx는 node_modules/.bin에 설치되어 있거나 자체적으로 관리하는(package.json이 없는 경우) bin 스크립트를 실행합니다. npx는 모든 명령을 실행하는 데 선호되는 방법입니다. npx는 Node.js의 일부입니다.

package.json:::
이 파일은 npm(또는 Yarn)이 가져와야 하는 종속성(퍼지 버전을 사용하여 설명됨)을 추적합니다.

package-lock.json:::
이 파일에는 npm이 해결한 종속성에 대한 보고서가 포함되어 있습니다. 이 정보는 종속성 해결이 재현 가능하도록 보장합니다.

node_modules/:::
npm(또는 Yarn)이 가져오는 해결된 종속성의 로컬 캐시입니다.

PostCSS::
이 프로젝트는 Sass나 LESS와 같은 CSS 전처리기를 사용하지 않습니다. 대신 일련의 후처리기에 의해 향상된 일반 CSS에 의존합니다. 가장 일반적인 후처리기는 벤더 접두사가 있는 속성을 추가하여 더 새로운 CSS 기능을 이전 브라우저로 백포트합니다.

== UI 프로젝트 대 UI 번들

git 저장소의 소스 파일로 구성된 **UI 프로젝트**는 Antora UI 번들을 만들기 위한 레시피와 원재료를 제공합니다. 빌드, 소스 파일, 프로젝트 파일 및 종속성 정보가 포함됩니다. 이것이 개발 작업 공간입니다.

배포 가능한 아카이브인 **UI 번들**은 Antora에서 사용할 준비가 된 미리 컴파일된(해석, 통합 및/또는 최소화된) 파일을 제공합니다.

=== UI 프로젝트 저장소 구조 (기본 브랜치)

UI 프로젝트의 기본 브랜치를 UI 작업 공간으로 생각해야 합니다. 빌드, 소스 파일, 프로젝트 파일 및 종속성 정보를 포함하여 UI를 만들기 위한 레시피와 원재료가 포함되어 있습니다.

다음은 UI 프로젝트에서 파일이 구조화되는 방식입니다:

[source]
----
README.adoc
gulpfile.js/
  index.js
  lib/
  tasks/
package.json
package-lock.json
src/
  css/
    base.css
    breadcrumbs.css
    ...
  helpers/
    and.js
    eq.js
    ...
  img/
    back.svg
    caret.svg
    ...
  layouts/
    404.hbs
    default.hbs
  partials/
    article.hbs
    breadcrumbs.hbs
    ...
  js/
    01-navigation.js
    02-fragment-jumper.js
    ...
    vendor/
      highlight.js
preview-src/
  index.html
  ui-model.yml
----

Gulp 빌드는 UI 프로젝트 파일을 컴파일하고 UI 번들로 조립하는 데 사용됩니다.

=== UI 번들 구조 (릴리스)

배포 가능한 아카이브인 UI 번들은 Antora에서 사용할 준비가 된 파일을 제공합니다.
UI 프로젝트 파일이 Gulp에 의해 빌드되면 public 디렉토리 아래에 조립됩니다. public 디렉토리는 생성되므로 안전하게 제거할 수 있습니다.

UI 번들의 내용은 UI 프로젝트의 기본 브랜치 내용과 유사하지만, 번들에는 UI를 구성하는 파일 이외의 파일은 포함되지 않습니다. 이것이 Antora에서 사용되는 콘텐츠입니다.

[source]
----
css/
  site.css
font/
  ...
helpers/
  and.js
  eq.js
  ...
img/
  back.svg
  caret.svg
  ...
layouts/
  404.hbs
  default.hbs
partials/
  article.hbs
  breadcrumbs.hbs
  ...
js/
  site.js
  vendor/
    highlight.js
----

이러한 파일 중 일부는 스타일시트와 JavaScript와 같이 컴파일되거나 집계되었습니다. UI 파일을 빌드하는 이점은 UI 개발을 방해하지 않고 사이트에 정적으로 포함하기 위해 파일을 최적화할 수 있다는 것입니다. 예를 들어, UI 빌드는 SVG를 최적화하거나 CSS에 벤더 접두사를 추가할 수 있습니다. 이러한 최적화는 미리 컴파일된 파일에만 적용되므로 웹 개발자의 워크플로우를 방해하지 않습니다.

=== UI 컴파일 및 생성기 소비 개요

Antora UI 프로젝트의 목적은 UI 파일을 Antora가 HTML 페이지와 그들이 필요로 하는 자산을 구성하는 데 사용할 수 있는 재사용 가능한 배포로 조립하는 것입니다.

UI 번들에서 유일하게 필요한 파일은 페이지용 기본 Handlebars 레이아웃(즉, __layouts/default.hbs__)입니다. 404 페이지가 활성화되어 있다면 404 페이지용 Handlebars 레이아웃(즉, __layouts/404.hbs__)도 필요합니다.

레이아웃 파일은 UI 번들의 layouts 폴더에 위치해야 합니다. 레이아웃의 이름은 파일의 stem으로, 파일의 basename에서 파일 확장자를 제외한 것입니다(예: __layouts/default.hbs__는 default가 됨).

[source]
----
layouts/
  404.hbs
  default.hbs
----

UI 번들에 다른 필수 파일은 없습니다. 추가 파일은 레이아웃에서 참조되는 경우에만 필요합니다. 이는 HTML을 생성할 때(부분 또는 헬퍼) 또는 브라우저에 제공되는 HTML이 참조하는 자산(CSS 또는 JavaScript)일 수 있습니다. Antora는 레이아웃, 부분 또는 헬퍼를 생성된 사이트로 복사하지 않습니다.

레이아웃이 부분을 찾는 경우, 해당 부분은 partials 디렉토리에 위치해야 합니다. 부분의 이름은 파일의 stem입니다(예: __partials/body.hbs__는 body가 되어 > body로 사용됨). 부분이 폴더 안에 있는 경우 해당 폴더의 이름은 부분의 이름에 사용되지 않습니다. 또한 helpers 디렉토리에 있는 모든 JavaScript 파일은 자동으로 템플릿 헬퍼로 등록됩니다. 헬퍼 함수의 이름은 파일의 stem과 일치합니다(예: __helpers/concat.js__는 concat이 됨).

다음은 레이아웃, 부분 및 헬퍼가 있는 UI의 구조입니다:

[source]
----
helpers/
  concat.js
layouts/
  404.hbs
  default.hbs
partials/
  body.hbs
----

UI는 프로덕션 사이트에서 정적으로 제공되지만, UI의 자산은 개발을 수용하고 유지 관리를 단순화하기 위해 UI 프로젝트에서 소스 형태로 존재합니다. Antora 파이프라인에 전달될 때 UI는 중간의 미리 컴파일된 상태입니다. 구체적으로, git 저장소의 기본 브랜치에는 소스 형태의 파일이 포함되어 있고 릴리스는 미리 컴파일된 형태의 파일을 배포하는 데 사용됩니다.

UI 컴파일 책임은 UI 프로젝트와 Antora 사이에 공유됩니다. UI 프로젝트는 로컬 빌드를 사용하여 파일을 미리 컴파일합니다(즉, 해석, 통합 및/또는 최소화). 미리 컴파일된 파일은 Antora의 콘텐츠 모델에 구애받지 않아 생성기가 이 부분을 처리할 필요가 없습니다. 또한 UI를 재사용할 수 있게 합니다.

그런 다음 UI 프로젝트 빌드는 UI를 번들로 패키징하고, Antora의 UI 로더가 이를 소비합니다. Antora는 번들을 가져와 UI 카탈로그로 추출하고, Antora의 콘텐츠 모델을 Handlebars 템플릿에 엮어 페이지와 보조 데이터 파일을 만들어 컴파일을 완료합니다. 그런 다음 Antora는 남은 UI 자산을 사이트 출력으로 복사합니다.

이제 UI를 구성하는 파일과 조립 방법에 대한 개요를 살펴보았으니, 프로젝트를 설정하고 UI를 빌드하며 미리보는 방법을 살펴보겠습니다.