= Handlebars 템플릿 작업

여기 Antora UI 템플릿에 대한 한국어 번역과 AsciiDoc 형식으로 변환한 내용입니다:

== Antora와 Handlebars 템플릿

Antora는 Handlebars 템플릿을 변환된 AsciiDoc 콘텐츠 및 기타 UI 모델 데이터와 결합하여 사이트의 페이지를 만듭니다. 이 "로직 없는" 템플릿은 대부분 HTML이며, 콘텐츠가 삽입되어야 하는 곳에 특별한 mustache 태그가 뿌려져 있습니다.

== 템플릿의 역할

layout 템플릿(__src/layouts/__에 저장됨)은 주요 페이지 구조를 제공합니다. partial 템플릿(__src/partials/__에 있음)은 내비게이션 및 푸터와 같은 페이지의 다른 영역을 채웁니다.

템플릿은 Antora가 채운 모델에서 읽습니다. 모델은 mustache로 둘러싸인 경로 표현식을 사용하여 접근할 수 있습니다. mustache는 `{{` 와 `}}` 또는 `{{{` 와 `}}}` 입니다(예: `{{{page.title}}}`). 이중 mustache는 HTML에 대한 값을 이스케이프하고, 삼중 mustache는 값을 그대로 삽입합니다.

WARNING: mustache 앞에 백슬래시가 있으면(예: `\{{`) 표현식이 비활성화됩니다. 이는 URL을 구성할 때 자주 발생합니다. 이 문제를 피하려면 URL에 백슬래시 대신 정방향 슬래시를 사용해야 합니다.

`{{` 바로 뒤에 ``>``가 오면 partial(__partials__ 디렉토리에서)을 호출하고 결과를 삽입합니다(예: `{{> head}}`). 즉, 이는 다른 mustache 표현식과 같은 모델 참조가 아닙니다.


=== 템플릿 변수

CAUTION: 이 모델은 최종 버전이 아닙니다. 변수 이름과 목적이 변경될 수 있습니다.

다음은 사용 가능한 UI 모델의 개요입니다:

.Handlebars 템플릿에서 사용 가능한 변수 (최상위 변수는 굵게 표시)
[cols="1m,2"]
|===
|이름 |설명

|*site*
|사이트에 대한 정보.

|site.url
|플레이북에 지정된 경우 사이트의 기본 URL. 사이트 시작 페이지가 정의된 경우 방문자는 이 위치에서 시작 페이지로 리디렉션됩니다. site.path의 값을 포함합니다. 페이지의 절대 URL을 만들기 위해 page.url 앞에 추가할 수 있습니다(예: ``{{{site.url}}}```{{{page.url}}}``).

|site.path
|사이트가 호스팅되는 site.url의 경로 이름(즉, 하위 경로)(예: /docs). site.url이 정의되지 않았거나, 경로 세그먼트가 없거나, /와 일치하는 경우 이 값은 비어 있습니다. 헬퍼를 사용하여 site.url 값에서 삭제할 수 있습니다(예: ``deleteSuffix`` ``site.url site.path``). 페이지의 루트 상대 URL을 만들기 위해 page.url 앞에 추가할 수 있습니다(예: ``{{{site.path}}}`` ``{{{page.url}}}``). (Antora 2.1 이후)

|site.title
|사이트의 제목.

|site.homeUrl
|사이트의 시작(즉, 홈) 페이지를 직접 가리키는 URL.

|site.components
|컴포넌트 이름으로 키가 지정된 사이트의 모든 컴포넌트 맵. 각 컴포넌트의 속성에는 name, title, url, latest, versions가 포함됩니다. 각 버전의 속성에는 name(2.3 이후), version, displayVersion, prerelease(설정된 경우), title, url, asciidoc(2.3 이후), navigation이 포함됩니다. 각 버전의 navigation 속성은 해당 컴포넌트 버전의 내비게이션 메뉴에 대한 접근을 제공합니다.

|site.ui
|사이트 UI에 대한 정보.

|site.ui.defaultLayout
|이 사이트에 사용되는 기본 페이지 레이아웃.

|site.ui.url
|UI의 절대 기본 URL.

|*page*
|현재 페이지에 대한 정보.

|page.title
|HTML 형식의 페이지 제목(주로 주요 제목으로 사용됨). 이 값에는 인라인 HTML 요소 및 XML 문자 참조가 포함될 수 있습니다.

|page.contents
|HTML 형식의 주요 문서 내용. AsciiDoc에서 소스를 가져와 Asciidoctor 프로세서에 의해 HTML로 변환됩니다.

|page.attributes
|``page-``로 시작하는 모든 AsciiDoc 문서 속성. 이 모델에서 사용되는 이름에서 ``page-`` 접두사는 제거됩니다. 예를 들어, ``page-support-phone``이라는 문서 속성의 값은 UI 모델에서 ``page.attributes.support-phone``을 통해 접근할 수 있습니다. 페이지 속성은 AsciiDoc 문서 헤더에서 페이지별로 정의하거나(예: ``:page-support-phone: +1 212-555-1234``) 플레이북의 ``asciidoc.attributes`` 키 아래에서 전역적으로 정의할 수 있습니다. ``page-`` 접두사는 페이지 관련 속성을 AsciiDoc의 수많은 다른 문서 속성과 분리하는 데 사용됩니다.

|page.author
|AsciiDoc 헤더에 한 명 이상의 저자가 지정된 경우 문서의 첫 번째 저자.

|page.description
|지정된 경우 AsciiDoc 헤더의 description 속성의 텍스트.

|page.keywords
|지정된 경우 AsciiDoc 헤더에 정의된 키워드의 쉼표로 구분된 목록.

|page.component
|현재 페이지의 컴포넌트에 대한 정보. 속성에는 name, title, url, latest, versions가 포함됩니다.

|page.componentVersion
|현재 페이지의 컴포넌트 버전에 대한 정보. 속성에는 name(2.3 이후), version, displayVersion, prerelease(설정된 경우), title, url, asciidoc(2.3 이후)가 포함됩니다.

|page.module
|현재 페이지의 모듈 이름.

|page.relativeSrcPath
|현재 모듈의 pages 디렉토리를 기준으로 한 현재 페이지의 경로(2.3 이후).

|page.version
|현재 페이지의 버전 이름.

|page.displayVersion
|현재 페이지의 표시 버전 이름.

|page.versions
|현재 페이지를 포함한 모든 버전의 현재 페이지. 각 항목에는 url, string, missing 속성이 있습니다.

|page.latest
|이 페이지에서 사용 가능한 최신 버전에 해당하는 page.versions의 항목. 최신 페이지는 컴포넌트의 최신 버전에서 가져온 것이 아닐 수 있습니다(해당 버전에 페이지가 없는 경우). 이 페이지가 버전 없는 컴포넌트에 있는 경우 이 속성은 설정되지 않습니다.

|page.breadcrumbs
|내비게이션 트리에서 현재 선택을 나타내는 breadcrumbs 항목의 배열. 텍스트 전용 및 외부 항목을 포함합니다.

|page.navigation
|현재 페이지의 컴포넌트 버전에 대한 계층적 내비게이션 메뉴. 각 내비게이션 항목에는 content 속성과 선택적 url 및 (하위) items 속성이 포함됩니다.

|page.url
|현재 페이지의 URL. 이 URL은 루트 상대 경로입니다(즉, /로 시작함). 여기서 루트는 Antora가 파일을 게시한 위치를 나타냅니다. 이 값은 대부분 ``relativize`` 헬퍼가 이 페이지에서 상대 URL을 생성하는 데 사용됩니다.

|page.canonicalUrl
|현재 페이지의 정식 URL. canonicalUrl은 site.url이 절대 URL로 설정되고 페이지의 컴포넌트에 적어도 하나의 비 사전 출시 버전이 있는 경우에만 설정됩니다. 컴포넌트의 여러 버전이 있는 경우 정식 URL은 페이지의 가장 최근의 비 사전 출시 버전의 정규화된 URL입니다. 컴포넌트의 버전이 하나만 있는 경우 정식 URL은 현재 페이지의 정규화된 URL입니다.

|page.editUrl
|현재 페이지를 편집하는 URL(즉, git 호스트의 웹 기반 편집기를 활성화함). 이 값은 github.com, gitlab.com, pagure.io, bitbucket.org 호스트에 대해 저장소가 비공개인 경우에도 자동으로 유도됩니다. 호스트가 인식되지 않거나 값을 사용자 정의하려면 플레이북의 콘텐츠 소스에서 ``edit_url`` 키를 사용할 수 있습니다.

기본 UI는 저장소가 비공개가 아니거나(즉, ``page.origin.private``가 truthy가 아님) ``page.fileUri``가 설정되지 않은 경우 이 URL을 가리키는 "이 페이지 편집" 링크를 표시합니다. F``ORCE_SHOW_EDIT_PAGE_LINK`` 환경 변수를 설정하거나(예: ``FORCE_SHOW_EDIT_PAGE_LINK=true``) UI 템플릿의 로직을 사용자 정의하여 이 링크를 강제로 표시할 수 있습니다.

|page.fileUri
|페이지가 로컬 파일 시스템(즉, 작업 트리)에서 시작된 경우 현재 페이지를 편집하기 위한 로컬 file:// URI.

이 속성이 설정되면 기본 UI는 CI 환경 변수가 설정되지 않은 경우(예: ``CI=true``) 이 URI를 가리키는 "이 페이지 편집" 링크를 표시합니다(``page.editUrl`` 값 대신). CI 환경 변수가 설정되면 기본 UI는 이 속성을 무시합니다(게시된 사이트에서 로컬 file:// URI에 연결하는 것은 의미가 없기 때문입니다).

|page.origin
|현재 페이지가 가져온 콘텐츠 소스에 대한 정보. 속성에는 url, reftype(3.1 이후), refname, branch, tag, refhash(2.3 이후), startPath, worktree, webUrl, fileUriPattern, editUrlPattern, private가 포함됩니다.

|page.origin.private
|git 서버가 인증 자격 증명을 요청하는 경우 이 값은 ``auth-required``가 되고, 그렇지 않으면 플레이북의 콘텐츠 소스 URL에 자격 증명이 포함된 경우 ``auth-embedded``가 되며, 그렇지 않으면 설정되지 않습니다. 기본 UI에서 이 값이 truthy인 경우 "이 페이지 편집" 링크가 표시되지 않습니다. 이 속성을 truthy로 강제하는 빠른 방법(저장소가 공개인 경우에도)은 플레이북의 콘텐츠 소스 URL을 빈 자격 증명으로 시작하는 것입니다(예: https://@). 그러면 "이 페이지 편집" 링크가 나타나지 않습니다.

|page.home
|현재 페이지가 사이트의 시작(즉, 홈) 페이지인지 여부를 나타냅니다.

|page.layout
|현재 페이지의 페이지 레이아웃.

|page.next
|내비게이션 트리에서 다음으로 도달할 수 있는 페이지(텍스트 전용 및 외부 항목을 건너뜁니다).

|page.previous
|내비게이션 트리에서 이전에 도달할 수 있는 페이지(텍스트 전용 및 외부 항목을 건너뜁니다).

|page.parent
|내비게이션 트리에서 상위 페이지(텍스트 전용 및 외부 항목을 건너뜁니다).

|*env*
|환경 변수의 맵(process.env에서 가져옴).

|*siteRootPath*
|게시된 사이트의 루트에 대한 상대 경로. 사이트 시작 페이지가 정의된 경우 방문자는 이 위치에서 시작 페이지로 리디렉션됩니다. 사이트 URL이 설정되지 않은 경우 대체로 사용할 수 있습니다. 이 값은 404 페이지 템플릿에서 루트 상대적이며, 이는 404 페이지가 웹 서버에서 제대로 작동하는 데 필요합니다.

|*uiRootPath*
|UI의 루트 디렉토리에 대한 상대 경로. 이 값은 404 페이지 템플릿에서 루트 상대적이며, 이는 404 페이지가 웹 서버에서 제대로 작동하는 데 필요합니다.

|*antoraVersion*
|사이트를 빌드하는 데 사용된 Antora의 버전(특히 @antora/page-composer 패키지의 버전).

|*contentCatalog*
|Antora의 가상 콘텐츠 카탈로그에 대한 프록시 객체로, 컴포넌트, 컴포넌트 버전, 페이지 및 리소스 파일에 대한 액세스를 제공합니다. 다음 메서드를 노출합니다: ``findBy``, ``getById``, ``getComponent``, ``getComponentVersion``, ``getComponents``, ``getComponentsSortedBy``, ``getFiles``, ``getPages``, ``getSiteStartPage``, ``resolvePage``, ``resolveResource``. 이 객체는 UI 헬퍼에서만 사용해야 합니다.
|===

이 모델은 시간이 지남에 따라 확장될 가능성이 있습니다.

== 템플릿 수정하기

HTML 헤드 내에 새로운 메타 태그를 추가하고 싶은 경우를 고려해 봅시다.

먼저 프로젝트를 설정하고 개발 브랜치를 생성했는지 확인하세요. 그 다음, templates/partials/head.hbs 파일을 열고 태그를 추가하세요.

[source,html]
----
<meta class="swiftype" name="title" data-type="string" content="{{page.title}}">
----

각 템플릿 파일은 템플릿 모델에 접근할 수 있으며, 이 모델은 변수 이름을 통해 현재 페이지에 대한 정보를 노출합니다. 현재 사용 가능한 변수는 "Handlebars 템플릿에서 사용 가능한 변수" 표에 나열되어 있습니다.

파일을 저장하고, git에 커밋하고, 브랜치를 푸시한 다음, 승인 워크플로우가 진행되도록 하세요.